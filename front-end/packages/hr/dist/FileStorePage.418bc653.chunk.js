webpackJsonp([4],{1389:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(7),f=n(u),c=r(1390),s=n(c);r(1592);var p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"render",value:function(){return f.default.createElement(s.default,null)}}]),t}(u.Component);p.propTypes={},p.defaultProps={},t.default=p},1390:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1391);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(o).default}})},1391:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(7),c=n(f),s=r(69),p=r(314),d=n(p),b=r(526),m=n(b),y=r(544),v=n(y),_=r(545),h=n(_),g=r(546),w=n(g),O=r(395),x=n(O),j=r(722),E=n(j),P=r(1399),S=n(P);r(1590);var k="file-store-container",M=(new m.default,(0,s.observer)(l=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onSubmit=function(){e.viewStore.submit()},e.handleSelectFile=function(t){e.viewStore.setFile(t)},e.viewStore=new S.default,e}return a(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.viewStore.form;return c.default.createElement("div",{className:k+" container"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"col-md-8 offset-md-2"},c.default.createElement(v.default,{align:"center"},"Store Medical Record File"),c.default.createElement(d.default,{className:"content-wrapper",justify:"center",align:"center"},c.default.createElement("div",{className:k+"__form"},c.default.createElement("div",{className:k+"__form-fields"},c.default.createElement("div",{className:"standalone-label"},t.$("privateKey").label),c.default.createElement(h.default,{error:t.$("privateKey").error},c.default.createElement(w.default,{value:t.$("privateKey").value,onDOMChange:t.$("privateKey").sync})),c.default.createElement("div",{className:"standalone-label"},t.$("password").label),c.default.createElement(h.default,{error:t.$("password").error},c.default.createElement(w.default,{type:"password",value:t.$("password").value,onDOMChange:t.$("password").sync})),c.default.createElement(E.default,{onSelect:this.handleSelectFile,file:this.viewStore.file})),c.default.createElement("div",{className:k+"__form-actions"},c.default.createElement(x.default,{label:"Submit",primary:!0,onClick:function(r){return t.onSubmit(r,{onSuccess:e.onSubmit})}})))))))}}]),t}(f.Component))||l);M.propTypes={},M.defaultProps={},t.default=M},1399:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0});var l,u,f,c,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=r(41),d=r(1400),b=r(730),m=n(b),y=r(447),v=(n(y),r(1433)),_=n(v),h=(l=function(){function e(){i(this,e),o(this,"form",u,this),o(this,"file",f,this),o(this,"isSaving",c,this),this.form=new _.default}return s(e,[{key:"uploadFile",value:function(){var e=this.file,t=e.name.split(".").pop();return(0,d.requestLink)(t).then(function(t){if(t&&t.data&&t.data.link)return(0,d.uploadImage)(e,t.data.link).then(function(){var e=m.default.FILE_HOST+"/"+t.data.fileUrl;return Promise.resolve(e)})})}},{key:"setFile",value:function(e){this.file=e}},{key:"submit",value:function(){var e=this.form.values();new FileReader;this.uploadFile().then(function(t){(0,d.postToContract)(Object.assign(e,{fileLink:t}))})}}]),e}(),u=a(l.prototype,"form",[p.observable],{enumerable:!0,initializer:null}),f=a(l.prototype,"file",[p.observable],{enumerable:!0,initializer:function(){return null}}),c=a(l.prototype,"isSaving",[p.observable],{enumerable:!0,initializer:function(){return!1}}),a(l.prototype,"uploadFile",[p.action],Object.getOwnPropertyDescriptor(l.prototype,"uploadFile"),l.prototype),a(l.prototype,"setFile",[p.action],Object.getOwnPropertyDescriptor(l.prototype,"setFile"),l.prototype),a(l.prototype,"submit",[p.action],Object.getOwnPropertyDescriptor(l.prototype,"submit"),l.prototype),l);t.default=h},1400:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postToContract=t.uploadImage=t.requestLink=void 0;var n=r(447),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.requestLink=function(e){return o.default.get("upload/uploadUrl?fileType="+e)},t.uploadImage=function(e,t){return o.default.uploadFile(e,t)},t.postToContract=function(e){return o.default.post("contract/store",e)}},1433:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(549),u=n(l),f=r(747),c=n(f),s=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{privateKey:{label:"Your private key",rules:"required"},password:{label:"Password to encrypt file",rules:"required"}}},p={dvr:{package:u.default}},d=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{plugins:r.plugins||p,fields:s(e)}));return n.setEntity(e),n}return a(t,e),t}(c.default);t.default=d},1590:function(e,t,r){var n=r(1591);"string"==typeof n&&(n=[[e.i,n,""]]);r(118)(n,{});n.locals&&(e.exports=n.locals)},1591:function(e,t,r){t=e.exports=r(68)(),t.push([e.i,".file-store-container{padding:20px 0}.file-store-container .content-wrapper{box-shadow:0 2px 13px 0 hsla(0,0%,75%,.5);margin:0 50px}.file-store-container__goal-status{min-height:calc(100vh - 48px - 50px)}.file-store-container__goal-status>.grommetux-box__body{display:flex}.file-store-container__goal-status .empty-state{flex-grow:1;color:#9b9b9b;font-size:16px}.file-store-container .grommetux-heading h1{margin-top:100px}.file-store-container .standalone-label{font-weight:600;font-size:16px;text-align:left}.file-store-container .grommetux-button{min-height:50px;min-width:200px;margin-top:15px;margin-bottom:30px;font-size:16px}.file-store-container__form-fields{margin-bottom:32px}.file-store-container__form{margin-top:35px;width:80%}.file-store-container__form .grommetux-form-field{width:100%;margin-bottom:23px}.file-store-container__form .grommetux-form-field:last-child{margin-bottom:0}.file-store-container__form-actions{text-align:center}.file-store-container__form-actions .grommetux-button{min-width:160px}",""])},1592:function(e,t,r){var n=r(1593);"string"==typeof n&&(n=[[e.i,n,""]]);r(118)(n,{});n.locals&&(e.exports=n.locals)},1593:function(e,t,r){t=e.exports=r(68)(),t.push([e.i,"",""])},270:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1389);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(o).default}})}});